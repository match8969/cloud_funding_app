<p id="notice"><%= notice %></p>

<div class="container">
  <div class="row">
    <div class="col-md-11 heading">
      <h1>Products</h1>
    </div>
    <%= link_to 'New Product', new_admin_product_path, class: "col-md-1 link__new" %>
  </div>
</div>

<table class="table">
  <thead class="table__header">
    <tr>
      <th>Title</th>
      <th>Description</th>
      <th>Goal price</th>
      <th>Current price</th>
      <th>Due date</th>
      <th>State</th>
      <th>Categories</th>
      <th>Thumbnail</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody class="table__body">
    <% @products.each do |product| %>
      <tr>
        <td><%= product.title %></td>
        <td><%= product.description %></td>
        <td><%= product.goal_price %></td>
        <td><%= product.get_current_price %></td>
        <td><%= product.due_date %></td>
        <td><%= product.state %></td>
        <td>
          <% product.categories.each do |category| %>
            <p><%= category.name %></p>
          <% end %> 
        </td>
        <td><%= image_tag product.thumbnail.thumb %></td>
        <td><%= link_to 'Show', [:admin, product] %></td>
        <td><%= link_to 'Edit', edit_admin_product_path(product) %></td>
        <td><%= link_to 'Destroy', [:admin, product], method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>
<div class="pagination">
  <%= paginate @products %>
</div>
<br>
